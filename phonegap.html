<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Lucy&#39;s Blog by lucybot</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Lucy&#39;s Blog</h1>
          <h2></h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/bobby-brennan/lucy" id="view-on-github" class="button"><span>View on GitHub</span></a>
          <br>
          Join the beta!
          <form action="http://lucyreg.bbrennan.info:3000/beta-signup" method="GET" style="background-color:rgba(0,0,0,0.0);">
            <input type="text" name="email" placeholder="e-mail address" style="width:400px;"></input>
            <input type="submit" value="Join"></input>
          </form>
        </section>

        <hr>

        <section id="main_content">
          <h2>
<a name="first-post-hello-world" class="anchor" href="#first-post-hello-world"><span class="octicon octicon-link"></span></a>Getting Started with Lucy</h2>

<p>10/28/2014</p>
<p>
Lucy can do all sorts of things, but one of the simplest and most compelling use-cases is getting your coworkers, users, or readers up and running with a new library or platform.
Today we'll look at how we can use Lucy to help people get started building a PhoneGap application.
</p>
<p>
When I was building my first PhoneGap app, I started by forking a "starter repo":
<br><a href="https://github.com/arvindr21/helloPhoneGap">https://github.com/arvindr21/helloPhoneGap</a><br>
</p>
<p>
this got me all the files I needed to actually run an app, but the next 30-60 minutes were spent:<br>
- Changing the app's name (in both config.xml and index.html)<br>
- Changing the package name, description, and version<br>
- Hunting down and changing defaults that the original author had set (fullscreen=true, phonegap-version was old)<br>
- Generating new icons and splashscreens (dozens of them, all at different sizes) to replace the placeholders that came with the repo<br>
</p>
</p>
Even after I was satisfied that I'd discarded all the placeholders and made the app my own, I was bitten by a couple lingering issues:<br>
- I missed the &lt;author&gt; attribute, which was left as PhoneGap Team<br>
- I'd left in a bunch of unnecessary plugins in config.xml, causing my app to ask for tons of permissions it didn't need<br>
</p>
This is probably a familiar story.
Anytime you fork a repo or import a new library, there's always a bit of overhead before you can use it; you might need to write a wrapper around the library or change portions of the code to suit your needs.
However, those needs are usually predictable and trivial...perfect for automation! That's where Lucy comes in.
<br><br>

<h3>
  Building a PhoneGap app with Lucy
</h3>

<div class="highlight highlight-bash"><pre>
lucy build phonegap
</pre></div>
<p>
It's that simple! That command will bring up an editor with a config for you to fill out:
</p>
<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="s2">"appName"</span><span class="o">:</span> <span class="s2">"Lucy's Phonegap Test"</span><span class="p">,</span>
  <span class="s2">"appDescription"</span><span class="o">:</span> <span class="s2">"A test of the command: lucy build phonegap"</span><span class="p">,</span>
  <span class="s2">"packageName"</span><span class="o">:</span> <span class="s2">"com.lucytest"</span><span class="p">,</span>
  <span class="s2">"authorName"</span><span class="o">:</span> <span class="s2">"Lucy Goose"</span><span class="p">,</span>
  <span class="s2">"authorEmail"</span><span class="o">:</span> <span class="s2">"lucy@bbrennan.info"</span><span class="p">,</span>
  <span class="s2">"authorUrl"</span><span class="o">:</span> <span class="s2">"bbrennan.info"</span><span class="p">,</span>
  <span class="s2">"phonegapVersion"</span><span class="o">:</span> <span class="s2">"3.5.0"</span><span class="p">,</span>
  <span class="s2">"orientation"</span><span class="o">:</span> <span class="s2">"default"</span><span class="p">,</span>
  <span class="s2">"useFullscreen"</span><span class="o">:</span> <span class="s2">"false"</span><span class="p">,</span>
  <span class="s2">"icon"</span><span class="o">:</span> <span class="s2">"icon.png"</span><span class="p">,</span>
  <span class="s2">"splash_background"</span><span class="o">:</span> <span class="s2">"#0A1244"</span><span class="p">,</span>
  <span class="s2">"plugins"</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">"camera"</span><span class="p">,</span>
    <span class="s2">"contacts"</span><span class="p">,</span>
    <span class="s2">"com.phonegap.plugins.pushplugin"</span>
  <span class="p">],</span>
  <span class="s2">"externalDomains"</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">"http://www.mysite.com/"</span><span class="p">,</span>
    <span class="s2">"http://*.google.com/"</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>
  If you execute this command inside a <a href="https://github.com/new">new repository</a>, you can just run
</p>
<div class="highlight highlight-bash"><pre>
git add ./*
git commit -a -m "Initialize PhoneGap app"
git push
</pre></div>
<p>
  Then mosey on over to <a href="http://build.phonegap.com/">PhoneGap Build</a> and create a new project with your repo's URL.
  You're all set! You've got an app with a custom name, icons, splash screens, plugins, and permissions, just from a few lines of JSON!
</p>

<h3>So how does lucy do it?</h3>
<p>
  Let's take a look at the definition first
</p>



The first official lucy release was pushed today! You can see the project here:
<br>
<a href="https://github.com/bobby-brennan/lucy">https://github.com/bobby-brennan/lucy</a>
<br>
<code>define</code> and <code>publish</code> are still in beta, but you can <code>build</code> all you want! Sign up for the beta (above) if you'd like an early peek at the full version.
<br>
<br>
So what can lucy do? To start, there are two main components to a lucy module:<br></p>

<ul>
<li>DEFINITION - this is JSON that describes what kind of code is being generated, and provides a sample configuration.<br>
</li>
<li>PACKAGE - this is a set of code templates, scripts, and files that will be used to generate code. There can be multiple packages per definition.<br>
</li>
</ul>

<p>Most users will simply run <code>lucy build</code> to generate code from an existing lucy package. However, you can also create your own definitions and packages to share with others. Let's walk through a "hello world" example.</p>

<p><i>Note that while we're in beta, the <code>define</code> and <code>publish</code> commands won't work unless you're signed up. Feel free to jump ahead to <code>build</code> though!</i>
<br>
If you haven't already installed lucy, visit the <a href="https://github.com/bobby-brennan/lucy">github page</a> for instructions.</p>

<h3>
<a name="quickstart" class="anchor" href="#quickstart"><span class="octicon octicon-link"></span></a>Quickstart</h3>

<p>To download all the files described in this tutorial, enter a new directory and run</p>

<div class="highlight highlight-bash"><pre>lucy build hello-world-starter <span class="s1">'{"username": "SOME_UNIQUE_ID"}'</span>
</pre></div>

<p>choosing a unique id that won't collide with other hello-world-* definitions.</p>

<p>you can then run</p>

<div class="highlight highlight-bash"><pre>lucy define def.json

lucy publish pkg
lucy build hello-world-YOUR_UNIQUE_ID:js config.json

lucy publish javapkg
lucy build hello-world-YOUR_UNIQUE_ID:java config.json
</pre></div>

<h3>
<a name="the-definition" class="anchor" href="#the-definition"><span class="octicon octicon-link"></span></a>The Definition</h3>

<p>We start with a definition:
<br><br><i>def.json</i></p>

<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"hello-world"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="o">:</span> <span class="s2">"A hello world example for lucy"</span><span class="p">,</span>
  <span class="s2">"sample_input"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"greeting"</span><span class="o">:</span> <span class="s2">"Hello"</span><span class="p">,</span>
    <span class="s2">"person"</span><span class="o">:</span> <span class="s2">"world"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>and run:</p>

<div class="highlight highlight-bash"><pre>lucy define def.json
</pre></div>

<p>which pushes the definition to lucy's servers.
<br></p>

<h3>
<a name="the-package" class="anchor" href="#the-package"><span class="octicon octicon-link"></span></a>The Package</h3>

<p>Now we create a package by starting a new directory 'pkg'
<br><br><i>pkg/hello.ejs</i></p>

<div class="highlight highlight-js"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'&lt;%- greeting %&gt; &lt;%- person %&gt;'</span><span class="p">);</span>
</pre></div>

<p><br><i>pkg/package.json</i></p>

<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="s2">"lucy_def"</span><span class="o">:</span> <span class="s2">"hello-world"</span><span class="p">,</span>
  <span class="s2">"package_name"</span><span class="o">:</span> <span class="s2">"js"</span><span class="p">,</span>
  <span class="s2">"files"</span><span class="o">:</span> <span class="p">[{</span>
    <span class="s2">"from"</span><span class="o">:</span> <span class="s2">"hello.ejs"</span><span class="p">,</span>
    <span class="s2">"to"</span><span class="o">:</span> <span class="s2">"hello.js"</span><span class="p">,</span>
    <span class="s2">"method"</span><span class="o">:</span> <span class="s2">"render"</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>

<p>and run</p>

<div class="highlight highlight-bash"><pre>lucy publish pkg
</pre></div>

<p>which will zip up the directory and upload the resulting tarball.
<br></p>

<h3>
<a name="build" class="anchor" href="#build"><span class="octicon octicon-link"></span></a>Build!</h3>

<p>Now anyone can create a config.json like
<br><br><i>config.json</i></p>

<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="s2">"greeting"</span><span class="o">:</span> <span class="s2">"Yo"</span><span class="p">,</span>
  <span class="s2">"person"</span><span class="o">:</span> <span class="s2">"lucy"</span>
<span class="p">}</span>
</pre></div>

<p>and run</p>

<div class="highlight highlight-bash"><pre>lucy build hello-world:js config.json
</pre></div>

<p>which will generate this file in the working directory:
<br><br><i>hello.js</i></p>

<div class="highlight highlight-js"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Yo lucy"</span><span class="p">);</span>
</pre></div>

<p><br></p>

<h3>
<a name="extend" class="anchor" href="#extend"><span class="octicon octicon-link"></span></a>Extend!</h3>

<p>What's more, you (or anyone else) can add other packages to the hello-world definition, for example:
<br><br><i>hello.ejs</i></p>

<div class="highlight highlight-java"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;%- greeting %&gt; &lt;%- person %&gt;"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p><br><i>package.json</i></p>

<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="s2">"lucy_def"</span><span class="o">:</span> <span class="s2">"hello-world"</span><span class="p">,</span>
  <span class="s2">"package_name"</span><span class="o">:</span> <span class="s2">"java"</span><span class="p">,</span>
  <span class="s2">"files"</span><span class="o">:</span> <span class="p">[{</span>
    <span class="s2">"from"</span><span class="o">:</span> <span class="s2">"hello.ejs"</span><span class="p">,</span>
    <span class="s2">"to"</span><span class="o">:</span> <span class="s2">"HelloWorld.java"</span><span class="p">,</span>
    <span class="s2">"method"</span><span class="o">:</span> <span class="s2">"render"</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>

<p><br><br>
<a href="http://lucybot.github.io/blog/">Join the beta</a> if you're intersted in giving it a shot!</p>
        </section>

        <footer>
          Lucy&#39;s Blog is maintained by <a href="https://github.com/lucybot">lucybot</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
